# Практическая работа 1. Компиляция и запуск .NET приложения

**Цель данной серии работ:** Показать студентам процесс компиляции и запуска .NET-приложения на низком уровне, от написания кода в текстовом редакторе до получения исполняемого файла. Это формирует понимание жизненного цикла приложения и роли .NET CLI.

**Методический подход:** Каждый вариант — это не просто разное приложение, а немного разный путь его создания, компиляции или запуска, что заставляет студента задуматься о различных параметрах и конфигурациях. Работы расположены в порядке увеличения сложности.

---

### **Практическая работа №1: Основы компиляции и запуска .NET-приложения**

**Тема:** Компиляция и запуск консольного приложения .NET с использованием .NET CLI.

**Цель:** Освоить базовые навыки создания, компиляции и запуска простого консольного приложения .NET из командной строки.

**Задачи:**
1.  Создать структуру папок для проекта вручную.
2.  Написать код простого консольного приложения на C# с использованием текстового редактора.
3.  Инициализировать проект с помощью `dotnet new`.
4.  Скомпилировать приложение с помощью `dotnet build`.
5.  Запустить приложение с помощью `dotnet run` и напрямую, используя исполняемый файл.

**Ход работы:**

**Вариант 1: "Калькулятор площадей"**
1.  Создайте папку `AreaCalculator`. Внутри нее создайте подпапку `images`.
2.  Откройте командную строку (Terminal, PowerShell, CMD) и перейдите в папку `AreaCalculator`.
3.  Выполните команду `dotnet new console`. Изучите созданные файлы.
4.  Откройте файл `Program.cs` в текстовом редакторе (например, VS Code, Notepad++).
5.  **Задание:** Напишите программу, которая запрашивает у пользователя радиус круга, вычисляет его площадь (по формуле `S = π * r²`) и выводит результат на экран. Используйте значение `Math.PI` для π.
6.  Сохраните файл.
7.  Выполните команду `dotnet build`. Изучите вывод команды и содержимое появившейся папки `bin`.
8.  Выполните команду `dotnet run`. Убедитесь, что программа работает корректно.
9.  Перейдите в папку `bin/Debug/net8.0` (версия .NET может отличаться) и найдите файл `AreaCalculator.exe` (или `AreaCalculator` для Linux/macOS). Запустите приложение, выполнив этот файл напрямую.
10. Сделайте скриншоты: а) структуры папок проекта, б) кода в редакторе, в) результата работы программы в терминале.

---

**Вариант 2: "Генератор случайных паролей"**
1.  Создайте папку `PasswordGenerator`.
2.  Вручную создайте внутри нее файл `Program.cs` и папку `images`.
3.  **Задание:** Напишите программу, которая генерирует и выводит на экран случайный пароль длиной 12 символов. Пароль должен содержать буквы (в верхнем и нижнем регистре) и цифры. Используйте класс `Random`.
4.  Откройте терминал в папке `PasswordGenerator` и создайте файл проекта командой `dotnet new console --force`.
5.  Скомпилируйте и запустите проект, как в варианте 1.
6.  Сделайте скриншоты: а) структуры папок проекта (покажите, что файл `Program.cs` был создан вручную), б) кода, в) результата работы.

---

**Вариант 3: "Конвертер валют"**
1.  Создайте папку `CurrencyConverter`.
2.  Инициализируйте новый консольный проект с помощью `dotnet new console`.
3.  **Задание:** Напишите программу, которая запрашивает у пользователя сумму в долларах (USD) и выводит эквивалентную сумму в евро (EUR). Используйте фиксированный курс (например, 1 USD = 0.85 EUR).
4.  Скомпилируйте проект с помощью `dotnet build --configuration Release`. Обратите внимание на разницу в размере и расположении выходных файлов по сравнению с `Debug`.
5.  Запустите приложение из папки `bin/Release/...`.
6.  Сделайте скриншоты: а) команды `build` с флагом `Release`, б) результата запуска из `Release`-версии.

---

**Вариант 4: "Информация о системе"**
1.  Создайте папку `SystemInfo`.
2.  Инициализируйте проект.
3.  **Задание:** Напишите программу, которая выводит в консоль текущую дату и время, а также имя пользователя операционной системы. Используйте `DateTime.Now` и `Environment.UserName`.
4.  Скомпилируйте и запустите проект.
5.  Создайте файл `.gitignore` в корне папки `SystemInfo`. Добавьте в него стандартные шаблоны для .NET (например, `bin/`, `obj/`).
6.  Сделайте скриншоты: а) кода, б) вывода программы, в) содержимого файла `.gitignore`.

---

**Вариант 5: "Поэтапная компиляция (CSC)"**
1.  Создайте папку `SimpleMath`.
2.  Вручную создайте файл `Program.cs`.
3.  **Задание:** Напишите программу, которая запрашивает два числа у пользователя и выводит их сумму и произведение.
4.  Не используя `dotnet build`, скомпилируйте приложение с помощью компилятора C# (CSC). Команда будет выглядеть так: `csc Program.cs`.
    *   *Примечание для студентов: Убедитесь, что компилятор `csc` доступен в вашем PATH (обычно он находится в папке Windows SDK или .NET Framework).*
5.  Запустите полученный `SimpleMath.exe` файл.
6.  Сделайте скриншоты: а) команды компиляции с помощью `csc`, б) списка файлов после компиляции, в) результата работы.

---

**Вариант 6: "Работа с аргументами командной строки"**
1.  Создайте папку `Greeter`.
2.  Инициализируйте проект.
3.  **Задание:** Напишите программу, которая принимает аргумент командной строки (имя пользователя) и выводит приветствие: "Hello, [имя]!". Если аргумент не передан, выводите "Hello, World!".
4.  Скомпилируйте проект.
5.  Запустите приложение двумя способами:
    *   `dotnet run -- [ВашеИмя]`
    *   `dotnet run` (без аргументов)
    *   Запустите напрямую `Greeter.exe [ВашеИмя]` из папки `bin/Debug/...`
6.  Сделайте скриншоты с разными вариантами запуска.

---

**Вариант 7: "Сборка с конкретной версией .NET"**
1.  Создайте папку `NetVersion`.
2.  Инициализируйте проект, явно указав целевую версию .NET: `dotnet new console --framework net8.0` (укажите актуальную LTS-версию).
3.  **Задание:** Напишите программу, которая выводит в консоль версию .NET, в рамках которой она работает. Используйте: `Console.WriteLine($"Current .NET version: {Environment.Version}");`
4.  Отредактируйте файл `NetVersion.csproj`. Попробуйте изменить целевую версию .NET (например, на `net7.0` или `net6.0`), если она у вас установлена.
5.  Выполните `dotnet build` и `dotnet run`. Проследите, изменился ли вывод.
6.  Сделайте скриншоты: а) содержимого `.csproj` файла, б) вывода программы.

---

**Вариант 8: "Библиотека классов и консольное приложение"**
1.  Создайте две папки: `StringLibrary` и `StringApp`.
2.  В папке `StringLibrary` выполните `dotnet new classlib`.
3.  **Задание (для StringLibrary):** В файл `Class1.cs` добавьте статический метод `public static string Reverse(string s)`, который возвращает перевернутую строку.
4.  В папке `StringApp` выполните `dotnet new console`.
5.  **Задание (для StringApp):** Напишите программу, которая запрашивает строку у пользователя, переворачивает ее, используя метод из `StringLibrary`, и выводит результат.
6.  Добавьте ссылку на библиотеку в проект приложения. Перейдите в папку `StringApp` и выполните: `dotnet add reference ../StringLibrary/StringLibrary.csproj`.
7.  Выполните `dotnet build` для приложения. Убедитесь, что библиотека была скомпилирована вместе с ним.
8.  Запустите приложение.
9.  Сделайте скриншоты: а) структуры папок двух проектов, б) кода библиотеки, в) кода приложения, г) результата работы.

---

**Вариант 9: "Создание единого исполняемого файла"**
1.  Создайте папку `SelfContainedApp`.
2.  Инициализируйте консольный проект.
3.  **Задание:** Напишите простую программу, которая выводит фразу "I am a self-contained application!".
4.  Опубликуйте приложение в формате "единого исполняемого файла" для вашей ОС. Используйте команду:
    `dotnet publish -c Release -r win-x64 --self-contained true` (для Windows; для Linux используйте `linux-x64`, для macOS `osx-x64`).
5.  Найдите полученный исполняемый файл в папке `bin/Release/net8.0/win-x64/publish`. Обратите внимание на его размер.
6.  Скопируйте этот файл в любое другое место на диске (например, на Рабочий стол) и запустите его. Убедитесь, что он работает без установленного .NET SDK.
7.  Сделайте скриншоты: а) команды `publish`, б) запуска приложения из нового места.

---

**Вариант 10: "Приложение с зависимостями (NuGet)"**
1.  Создайте папку `JsonParser`.
2.  Инициализируйте консольный проект.
3.  Добавьте популярную NuGet-зависимость для работы с JSON. Например: `dotnet add package Newtonsoft.Json`.
4.  **Задание:** Напишите программу, которая создает простой объект (например, класс `Person` с полями `Name` и `Age`), сериализует его в строку JSON с помощью `JsonConvert.SerializeObject()` и выводит эту строку в консоль.
5.  Скомпилируйте и запустите приложение.
6.  Сделайте скриншоты: а) команды добавления пакета, б) кода программы, в) вывода JSON в консоль.

---

**Вариант 11: "Многофайловый проект"**
1.  Создайте папку `MultiFileApp`.
2.  Инициализируйте консольный проект.
3.  Вручную создайте в этой папке новый файл `Calculator.cs`.
4.  **Задание:** В файл `Calculator.cs` поместите статический класс `Calculator` с методами `Add`, `Subtract`, `Multiply`, `Divide`. В файле `Program.cs` реализуйте простой интерактивный калькулятор, который использует эти методы.
5.  Скомпилируйте и запустите проект. Обратите внимание, что `dotnet build` автоматически включает все `.cs` файлы в текущей папке.
6.  Сделайте скриншоты: а) структуры папок с двумя `.cs` файлами, б) кода в `Calculator.cs`, в) работы калькулятора.

---

**Вариант 12: "Отладка через командную строку"**
1.  Создайте папку `DebugSample`.
2.  Инициализируйте проект.
3.  **Задание:** Напишите программу с простой логической ошибкой. Например, программу, которая должна считать сумму чисел от 1 до N, но из-за ошибки в условии цикла считает до N-1.
4.  Скомпилируйте проект.
5.  Запустите его под отладчиком командной строки ( если используется Windows, можно использовать `cdb` или `WinDbg`, либо показать базовое использование `dotnet run`). Более простой способ — добавить `Console.ReadLine();` в конец программы и присоединиться к процессу через Visual Studio.
6.  *Цель этого варианта — не углубляться в отладку, а показать ее возможность вне IDE.*
7.  Сделайте скриншоты: а) кода с ошибкой, б) некорректного результата, в) процесса запуска под отладчиком (или окна Visual Studio, присоединенного к процессу).

---

**Вариант 13: "Глобальный инструмент .NET"**
1.  Создайте папку `MyGlobalTool`.
2.  Инициализируйте консольный проект.
3.  **Задание:** Напишите программу, которая выводит в консоль случайный совет или цитату (можно хранить массив строк в коде).
4.  Отредактируйте файл `.csproj`, чтобы указать, что это инструмент. Добавьте внутрь тега `<PropertyGroup>`:
    ```xml
    <PackAsTool>true</PackAsTool>
    <ToolCommandName>my-advice</ToolCommandName>
    <PackageOutputPath>./nupkg</PackageOutputPath>
    ```
5.  Создайте пакет инструмента: `dotnet pack`.
6.  Установите инструмент глобально: `dotnet tool install --global --add-source ./nupkg MyGlobalTool`.
7.  Проверьте его работу, выполнив в любом месте командной строки `my-advice`.
8.  Сделайте скриншоты: а) измененного `.csproj` файла, б) команды установки, в) вызова инструмента из произвольной папки.

---

**Вариант 14: "Анализатор кода (Roslyn)" - Упрощенный вариант**
1.  Создайте папку `SimpleAnalyzer`.
2.  Инициализируйте проект.
3.  **Задание:** Напишите программу, которая использует компилятор Roslyn для загрузки и простого анализа вашего же кода. Например, подсчитайте количество строк в файле `Program.cs`. Для этого добавьте пакет `Microsoft.CodeAnalysis.CSharp`.
    `dotnet add package Microsoft.CodeAnalysis.CSharp`
4.  Используйте `SyntaxTree` и `CSharpSyntaxTree.ParseText` для загрузки кода.
5.  Программа должна вывести что-то вроде: "Your program has X lines of code.".
6.  Сделайте скриншоты: а) кода анализатора, б) результата его работы.

---

**Вариант 15: "Сравнение компиляции в разных средах"**
1.  Создайте папку `CrossPlatform`.
2.  Инициализируйте проект.
3.  **Задание:** Напишите программу, которая выводит название текущей платформы, используя `RuntimeInformation.RuntimeIdentifier` или `Environment.OSVersion`.
4.  Скомпилируйте проект в режиме `Release`.
5.  Если у вас есть доступ к Windows, Linux и/или macOS, попробуйте выполнить `dotnet build` и запустить приложение на каждой из этих платформ. Если нет — скомпилируйте его для другой платформы, используя `dotnet publish -r <RID>` (как в варианте 9).
6.  *Цель: продемонстрировать кроссплатформенность .NET.*
7.  Сделайте скриншоты: а) вывода программы на одной платформе, б) вывода на другой (или команды публикации для другой платформы).

---

### **Критерии оценки**

*   **Отлично (5):** Все задачи выполнены полностью и корректно. Код соответствует заданию, компилируется без ошибок, выводит правильный результат. Студент предоставил все требуемые скриншоты и может ответить на все контрольные вопросы.
*   **Хорошо (4):** Задачи выполнены с незначительными недочетами (например, опечатка в выводе, неидеальное форматирование кода). Процесс компиляции и запуска понимается.
*   **Удовлетворительно (3):** Основные задачи выполнены (программа написана и запускается), но есть существенные ошибки в логике или невыполнены некоторые пункты работы (например, не все скриншоты).
*   **Неудовлетворительно (2):** Программа не компилируется, не запускается или студент не справился с большинством пунктов работы.

### **Контрольные вопросы**

1.  Какая разница между командами `dotnet build`, `dotnet run` и `dotnet publish`?
2.  Что происходит в папках `bin` и `obj` после компиляции?
3.  Для чего нужен файл `<имя_проекта>.csproj`?
4.  Каковы преимущества использования .NET CLI по сравнению с компиляцией через графическую IDE (например, Visual Studio)?
5.  Что такое "единое исполняемое приложение" (self-contained) и в чем его преимущества и недостатки?
6.  Как добавить внешнюю библиотеку (NuGet-пакет) в ваш проект через командную строку?
7.  Объясните, что такое целевая версия .NET (Target Framework) и зачем ее нужно указывать.
8.  В чем заключается основная идея кроссплатформенности в .NET?

---

### **Пример структуры репозитория для Варианта 1**

(В качестве примера для студентов)

```
AreaCalculator/
├── images/
│   ├── project-structure.png
│   ├── code-editor.png
│   └── program-output.png
├── .gitignore
├── README.md
├── Program.cs
├── AreaCalculator.csproj
└── bin/ (не коммитится, т.к. в .gitignore)
```

### **Содержимое `README.md` для Варианта 1**

```markdown
# Практическая работа №1
## Вариант 1: "Калькулятор площадей"

**Задание:** Написать программу, которая запрашивает у пользователя радиус круга, вычисляет его площадь и выводит результат на экран.

### Код решения (Program.cs)

```csharp
using System;

class Program
{
    static void Main()
    {
        Console.Write("Введите радиус круга: ");
        double radius = Convert.ToDouble(Console.ReadLine());
        
        double area = Math.PI * Math.Pow(radius, 2);
        
        Console.WriteLine($"Площадь круга с радиусом {radius} равна {area:F2}");
    }
}
```

### Скриншоты

1. **Структура проекта:**
   ![Структура проекта](images/project-structure.png)

2. **Код в редакторе:**
   ![Код в редакторе](images/code-editor.png)

3. **Результат выполнения:**
   ![Результат выполнения](images/program-output.png)
```