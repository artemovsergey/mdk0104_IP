# Практическая работа 12. Применение параллельных вычислений в .NET

## Цель работы

- Научиться использовать возможности параллельного программирования для ускорения вычислений.
- Изучить методы `Parallel.For`, `Parallel.ForEach` и `Parallel.Invoke`.
- Научиться распределять задачи между потоками и синхронизировать результаты.

---

## Теоретическая часть

### 1. Что такое параллельные вычисления

Параллельные вычисления позволяют выполнять несколько операций одновременно, используя несколько потоков, чтобы ускорить обработку данных.

### 2. Методы параллельного программирования

1. **Parallel.For** — цикл, где итерации могут выполняться параллельно.

```csharp
Parallel.For(0, 10, i =>
{
    Console.WriteLine($"Итерация {i}, поток {Thread.CurrentThread.ManagedThreadId}");
});
```

2. **Parallel.ForEach** — параллельная обработка коллекций.

```csharp
string[] names = { "Alice", "Bob", "Charlie" };
Parallel.ForEach(names, name =>
{
    Console.WriteLine($"Привет, {name}, поток {Thread.CurrentThread.ManagedThreadId}");
});
```

3. **Parallel.Invoke** — параллельное выполнение нескольких действий.

```csharp
Parallel.Invoke(
    () => Console.WriteLine("Действие 1"),
    () => Console.WriteLine("Действие 2"),
    () => Console.WriteLine("Действие 3")
);
```

### 3. Синхронизация результатов

Для безопасного доступа к общим ресурсам используйте `lock` или другие механизмы синхронизации (`Mutex`, `Monitor`).

---

## Практический пример

Вычислим сумму квадратов чисел от 1 до 1000 с использованием `Parallel.For`:

```csharp
using System;
using System.Threading.Tasks;

class Program
{
    static void Main()
    {
        int sum = 0;
        object lockObj = new object();

        Parallel.For(1, 1001, i =>
        {
            int square = i * i;
            lock (lockObj)
            {
                sum += square;
            }
        });

        Console.WriteLine($"Сумма квадратов чисел от 1 до 1000 = {sum}");
    }
}
```

---

## Ход работы

1. Изучите примеры использования `Parallel.For`, `Parallel.ForEach`, `Parallel.Invoke`.
2. Создайте новый проект Console App (.NET).
3. Реализуйте один из 15 вариантов задания (по номеру в журнале).
4. Сделайте скриншоты работы программы и поместите их в папку `images`.
5. Создайте `readme.md` с номером работы, вариантом и текстом задания.

---

## Варианты заданий (15 вариантов)

1. Использовать `Parallel.For` для вывода чисел от 1 до 20.
2. Использовать `Parallel.For` для подсчета суммы чисел от 1 до 100.
3. Использовать `Parallel.ForEach` для вывода элементов массива.
4. Использовать `Parallel.Invoke` для параллельного выполнения 3 действий.
5. Использовать `Parallel.For` для вычисления квадратов чисел от 1 до 50.
6. Использовать `Parallel.ForEach` для суммирования массива чисел.
7. Параллельное вычисление факториалов чисел от 1 до 10 с `Parallel.For`.
8. Параллельный вывод букв алфавита с использованием `Parallel.ForEach`.
9. Параллельное выполнение нескольких задач с `Parallel.Invoke`, каждая выводит своё имя 5 раз.
10. Параллельное вычисление суммы чётных чисел массива.
11. Параллельное вычисление суммы нечётных чисел массива.
12. Параллельное нахождение максимального числа в массиве.
13. Параллельное вычисление произведений чисел массива.
14. Использовать `Parallel.For` для подсчета суммы квадратов чисел до 1000.
15. Использовать `Parallel.Invoke` для имитации прогресса нескольких загрузок одновременно.

---

## Критерии оценки

| Оценка | Критерии                                                                                                          |
| ------ | ----------------------------------------------------------------------------------------------------------------- |
| 2      | Программа не запускается или параллельные вычисления не реализованы.                                              |
| 3      | Программа работает, но есть ошибки синхронизации или частичная реализация.                                        |
| 4      | Программа корректно выполняет параллельные вычисления, есть скриншоты, readme оформлен.                           |
| 5      | Полная работа, корректное использование методов `Parallel`, структурированный код, подсветка в readme, скриншоты. |

---

## Контрольные вопросы

1. Что такое параллельные вычисления и зачем они нужны?
2. В чём разница между `Parallel.For` и обычным циклом `for`?
3. Как использовать `Parallel.ForEach` для массивов и коллекций?
4. Для чего нужен `Parallel.Invoke`?
5. Как синхронизировать доступ к общим данным в параллельных вычислениях?

---

## Структура репозитория

```
Практическая_работа_12/
│
├─ Program.cs
├─ images/
│   └─ screenshot1.png
├─ readme.md
└─ Практическая_работа_12.csproj
```

### Пример readme.md

````markdown
# Практическая работа №12
**Тема:** Применение параллельных вычислений  
**Вариант:** 4

**Задание:** Использовать `Parallel.For` для вычисления суммы квадратов чисел от 1 до 1000.

```csharp
using System;
using System.Threading.Tasks;

class Program
{
    static void Main()
    {
        int sum = 0;
        object lockObj = new object();

        Parallel.For(1, 1001, i =>
        {
            int square = i * i;
            lock (lockObj)
            {
                sum += square;
            }
        });

        Console.WriteLine($"Сумма квадратов чисел от 1 до 1000 = {sum}");
    }
}
````

```