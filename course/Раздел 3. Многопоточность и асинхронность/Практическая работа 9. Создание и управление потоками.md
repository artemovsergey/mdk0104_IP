# Практическая работа 9. Создание и управление потоками в .NET

## Цель работы

* Научиться создавать и запускать потоки в C#.
* Освоить методы управления потоками (приостановка, возобновление, завершение).
* Изучить синхронизацию потоков для предотвращения конфликтов при доступе к общим ресурсам.

## Теоретическая часть

1. **Поток (Thread)** — отдельная линия выполнения в программе. Позволяет выполнять несколько задач параллельно.
2. **Создание потока**:

```csharp
Thread thread = new Thread(MethodName);
thread.Start();
```

3. **Приостановка и завершение**:

   * `thread.Join()` — ожидание завершения потока.
   * `thread.Abort()` — принудительное завершение (не рекомендуется).
4. **Синхронизация потоков**:

   * `lock` — обеспечивает взаимное исключение при доступе к общим данным.

```csharp
lock(someObject) {
    // код, доступный только одному потоку
}
```

5. **Пул потоков** (`ThreadPool`) — управляемый набор потоков для кратковременных задач.

## Практический пример

Создадим программу, которая запускает два потока: один выводит чётные числа, другой — нечётные, и синхронизирует их доступ к консоли.

```csharp
using System;
using System.Threading;

class Program
{
    static object consoleLock = new object();

    static void PrintEven()
    {
        for (int i = 0; i <= 10; i += 2)
        {
            lock (consoleLock)
            {
                Console.WriteLine("Чётное: " + i);
            }
            Thread.Sleep(500);
        }
    }

    static void PrintOdd()
    {
        for (int i = 1; i <= 10; i += 2)
        {
            lock (consoleLock)
            {
                Console.WriteLine("Нечётное: " + i);
            }
            Thread.Sleep(500);
        }
    }

    static void Main()
    {
        Thread evenThread = new Thread(PrintEven);
        Thread oddThread = new Thread(PrintOdd);

        evenThread.Start();
        oddThread.Start();

        evenThread.Join();
        oddThread.Join();

        Console.WriteLine("Программа завершена.");
    }
}
```

---

## Ход работы

1. Изучите пример программы.
2. Создайте новый проект Console App (.NET).
3. Реализуйте один из вариантов заданий (выбор по номеру в журнале).
4. Сделайте скриншоты работы программы и поместите их в папку `images`.
5. Оформите `readme.md` с номером работы, вариантом и текстом задания.

---

## Варианты заданий (15 простых вариантов)

1. Создать поток, который выводит числа от 1 до 20.
2. Создать два потока: один выводит чётные, другой — нечётные числа до 20.
3. Создать поток, который считает сумму чисел от 1 до 100.
4. Создать поток, который выводит таблицу умножения на 5.
5. Создать поток, который выводит 10 случайных чисел.
6. Создать два потока, которые суммируют массив чисел и выводят результат.
7. Создать поток, который выводит символы алфавита A–Z.
8. Создать поток, который выводит своё имя 10 раз.
9. Создать поток, который выводит время каждые 1 секунду 5 раз.
10. Создать два потока, один выводит квадрат числа, другой — куб числа.
11. Создать поток, который считает факториал числа.
12. Создать поток, который выводит все простые числа до 50.
13. Создать поток, который считывает числа с клавиатуры и выводит их сумму.
14. Создать поток, который выводит числа Фибоначчи до 100.
15. Создать поток, который имитирует загрузку прогресса от 0 до 100%.

---

## Критерии оценки

* **2** — программа не запускается, код содержит ошибки.
* **3** — программа выполняется, но реализована частично, отсутствует синхронизация или оформление кода.
* **4** — программа работает корректно, синхронизация есть, оформлены скриншоты и readme.
* **5** — программа полностью соответствует варианту, код структурирован, есть скриншоты работы, readme оформлен с подсветкой кода.

---

## Контрольные вопросы

1. Что такое поток в C# и зачем он нужен?
2. Как создать и запустить поток?
3. Что делает метод `Join()`?
4. Как синхронизировать доступ к общим ресурсам между потоками?
5. В чём отличие потока от пула потоков (`ThreadPool`)?

---

## Структура репозитория

```
Практическая_работа_№X/
│
├─ Program.cs
├─ images/
│   └─ screenshot1.png
├─ readme.md
└─ *.csproj
```

### Пример readme.md

````markdown
# Практическая работа №X
**Тема:** Создание и управление потоками  
**Вариант:** 3

**Задание:** Создать поток, который считает сумму чисел от 1 до 100 и выводит результат.

```csharp
using System;
using System.Threading;

class Program
{
    static void Main()
    {
        int sum = 0;
        Thread t = new Thread(() =>
        {
            for (int i = 1; i <= 100; i++)
                sum += i;
        });
        t.Start();
        t.Join();
        Console.WriteLine("Сумма чисел от 1 до 100: " + sum);
    }
}
````

```
